<html>
  <head>
    <title>My first branch.js app</title>
    <style>
      body { margin: 0; }
      canvas { border: 1px solid #FFFFFF; }
    </style>
  </head>
  <body>
    <script src="https://cdn.rawgit.com/mrdoob/three.js/dev/build/three.min.js"></script>
    <script src="https://cdn.rawgit.com/dobobaie/branch.js/master/branch.js"></script>
    <script>
      var app, scene, areaSize = (window.innerWidth / 2) - 14;

      // Example 1
      BRANCH
        .init(function() {
          this.height = areaSize;
          this.width = areaSize;
        })
        .scene()
        .triangle(BRANCH.vector(0, 0, 0).vector(0, 300, 0).vector(300, 0, 0))
        //.darkness(false)
        //.phong(true)
        .color(0xff0000)
        .wireframe(true)
        .render()
        //.remove()
      ;
     
      // Example 2
      app = BRANCH.init(function() {
        this.height = areaSize;
        this.width = areaSize;
      });

      scene = app.scene();

      var vec = BRANCH.vector(0, 0, 0).vector(0, 300, 0).vector(300, 0, 0);
      var t = scene.triangle(vec).wireframe(true);  
      var c1 = scene.circle(16, vec.slice(0));
      var c2 = scene.circle(16, vec.slice(1));
      var c3 = scene.circle(16, vec.slice(2));

      scene.render();

      app.update(function()
      {
          let vector = BRANCH
            .random(BRANCH.VECTOR3)
            .random(BRANCH.VECTOR3)
            .random(BRANCH.VECTOR3, BRANCH.vector(-200, -200), BRANCH.vector(200, 200))
          ;
          t.transform(vector).color(BRANCH.random(BRANCH.COLOR));
          c1.position(vector.slice(0)).color(BRANCH.random(BRANCH.COLOR));
          c2.position(vector.slice(1)).color(BRANCH.random(BRANCH.COLOR));
          c3.position(vector.slice(2)).color(BRANCH.random(BRANCH.COLOR));
      });

      // Example 3
      BRANCH
        .init(function() {
          this.height = areaSize;
          this.width = areaSize;
        }, 'myBranch')
        .scene('myScene')
        .circle(60, BRANCH.vector(0, 0, 0), 'myCirle')
      ;

      scene = BRANCH.get('myBranch').get('myScene');
      scene.get('myCirle').color(0xffff00);
      scene.render();

      // Example 4
      app = BRANCH.init(function() {
        this.height = areaSize;
        this.width = areaSize;
      });
      scene = app.scene();
      obj = scene
        .cube(BRANCH.vector(200, 200, 200), BRANCH.vector(0, 0, 0))
        .color(0xA4A4A4)
        .rotation(BRANCH.vector(5, 0, 5))
       ;
      scene.light(BRANCH.vector(50, 250, 400));
      scene.render();

      app.update(function() {
        obj.rotation.x += 0.08;
        obj.rotation.z += 0.08;
      });
      
      // Example 5
      app = BRANCH.init(function() {
        this.height = areaSize;
        this.width = areaSize;
      });
      scene = app.scene();
      scene
        .cone(180)
        .color(0x0000ff)
        .rotation(BRANCH.vector(5, 5, 5))
      ;
      scene.render();

      // Example 6
      app = BRANCH.init(function() {
        this.height = areaSize;
        this.width = areaSize;
      });
      scene = app.scene();
      scene
        .cylinder(180)
        .color(BRANCH.random(BRANCH.COLOR))
        .rotation(BRANCH.vector(-5, -5, -5))
      ;
      scene.render();

      // Example 7
      app = BRANCH.init(function() {
        this.height = areaSize;
        this.width = areaSize * 2;
      });
      scene = app.scene();
      scene.text('BRANCH.JS').font('https://raw.githubusercontent.com/mrdoob/three.js/master/examples/fonts/optimer_bold.typeface.json').position(BRANCH.vector(-100, 0, 0)).render(); // There are already a default font but for the example I add an other one
     
      // Example 8
      app = BRANCH.init(function() {
        this.height = areaSize;
        this.width = areaSize;
      });
      scene = app.scene();
      scene.line(BRANCH.vector(300, 0, 0).vector(300, 300, 0));
      scene.line(BRANCH.vector(0, 300, 0).vector(0, 0, 0).vector(0, -300, 0).vector(-300, -300, 0));
      scene.render();
     
      /*
          Examples THREE.JS mixed with BRANCH.JS
      */
      // Example 1
      app = BRANCH.init({
        height: 400,
        width: 400,
      });
      scene = app.scene();

      // START THREE.JS
      var dotGeometry = new THREE.Geometry();
      dotGeometry.vertices.push(new THREE.Vector3(0, 0, 0));
       
      var dotMaterial = new THREE.PointsMaterial({
        size: 10,
        sizeAttenuation: false,
        color: 0xffffff,
      });
      var dot = new THREE.Points(dotGeometry, dotMaterial);
      // END THREE.JS

      scene.add(dot).render().stop(); // Why stop ? Because we have to execute render to apply all mesh in scene so we stop the BRANCHE.JS draw 

      // START THREE.JS
      app.get(null, BRANCH.RENDERER).render(scene.get(null, BRANCH.SCENE), scene.get(null, BRANCH.CAMERA)); // render is three.js function => renderer.render(scene, camera)
      // END THREE.JS

      // Example 2 (usless but it works)
      THREErenderer = new THREE.WebGLRenderer();
      THREErenderer.setSize(400, 400);
      document.body.appendChild(THREErenderer.domElement);
      THREEscene = new THREE.Scene();
      THREEcamera = new THREE.PerspectiveCamera(50, 400 / 400, 1, 10000);
      THREEcamera.position.set(0, 0, 1000);
      THREEscene.add(THREEcamera);

      THREEscene.add(
        // Start BRANCH.JS
        BRANCH
          .init()
          .scene()
          .cube(BRANCH.vector(200, 200, 200), BRANCH.vector(0, 0, 0))
          .get(null, BRANCH.MESH)
        // end BRANCH.JS
      );
      
      THREErenderer.render(THREEscene, THREEcamera);
     </script>
  </body>
</html>